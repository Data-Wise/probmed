[{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"claudemd","dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md for probmed Package","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"about-this-package","dir":"","previous_headings":"","what":"About This Package","title":"CLAUDE.md for probmed Package","text":"probmed R package computing P_med, scale-free probabilistic effect size causal mediation analysis. P_med quantifies mediation effects probability counterfactual outcome treatment mediator control level exceeds counterfactual outcome control: P(Y_{x*,M_x} > Y_{x,M_x}).","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"core-mission","dir":"","previous_headings":"About This Package","what":"Core Mission","title":"CLAUDE.md for probmed Package","text":"Provide researchers scale-free, interpretable effect size measure mediation analysis works consistently across mixed variable types (binary, continuous) avoids limitations traditional mean-difference approaches. Methods accommodate simple complex mediation models maintaining accessibility applied practitioners.","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"key-features","dir":"","previous_headings":"About This Package","what":"Key Features","title":"CLAUDE.md for probmed Package","text":"Scale-free interpretation: P_med ∈ [0, 1] clear probabilistic meaning regardless variable scales Flexible estimation: Works GLMs, SEM (via lavaan), fitted models Multiple mediators: Supports parallel sequential mediation structures Interactions: Handles exposure-mediator interactions conditioning Bootstrap inference: Parametric nonparametric bootstrap confidence intervals S7 OOP architecture: Modern, type-safe object system extensibility","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"key-references","dir":"","previous_headings":"About This Package","what":"Key References","title":"CLAUDE.md for probmed Package","text":"McGraw & Wong (1992): Common language effect size statistics (Psychological Bulletin) Vargha & Delaney (2000): Critique improvement CL effect sizes (Journal Educational Behavioral Statistics) Imai, Keele, & Tingley (2010): General approach causal mediation analysis (Psychological Methods) VanderWeele & Vansteelandt (2014): Mediation analysis multiple mediators (European Journal Epidemiology) Tofighi et al. (2025): P_med manuscript (target: Psychological Methods)","code":""},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"package-building-and-checking","dir":"","previous_headings":"Common Development Commands","what":"Package Building and Checking","title":"CLAUDE.md for probmed Package","text":"","code":"# Install package dependencies install.packages(c(\"remotes\", \"rcmdcheck\")) remotes::install_deps(dependencies = TRUE)  # Check package (standard R CMD check) rcmdcheck::rcmdcheck(args = \"--no-manual\", error_on = \"error\")  # Build package devtools::build()  # Install and reload package during development devtools::load_all()"},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"documentation","dir":"","previous_headings":"Common Development Commands","what":"Documentation","title":"CLAUDE.md for probmed Package","text":"","code":"# Generate documentation from roxygen2 comments devtools::document()  # Build PDF manual devtools::build_manual()  # Build pkgdown site pkgdown::build_site()"},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"testing-and-linting","dir":"","previous_headings":"Common Development Commands","what":"Testing and Linting","title":"CLAUDE.md for probmed Package","text":"package uses GitHub Actions CI/CD workflows defined .github/workflows/: R-CMD-check.yaml: R package check multiple OS R versions test-coverage.yaml: Test coverage via covr pkgdown.yaml: Documentation website deployment","code":""},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"r-version-and-style","dir":"","previous_headings":"Coding Standards","what":"R Version and Style","title":"CLAUDE.md for probmed Package","text":"Minimum R version: 4.1.0 (native pipe |> support) OOP Framework: S7 (modern object system) Style: tidyverse style guide native pipe Roxygen2: Use roxygen2 documentation (>= 7.2.0) Clarity priority: Code must readable methodologists applied users","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"naming-conventions","dir":"","previous_headings":"Coding Standards","what":"Naming Conventions","title":"CLAUDE.md for probmed Package","text":"package uses snake_case consistently following tidyverse conventions: Functions: Main exports: pmed(), extract_mediation() S7 generics follow convention: extract_mediation(), pmed() Internal functions prefix dot: .pmed_core(), .pmed_parametric_boot() Arguments: formula_y, formula_m model specifications treatment, mediator, outcome variable names x_ref, x_value treatment contrast method inference method: “parametric_bootstrap”, “nonparametric_bootstrap”, “plugin” n_boot number bootstrap samples ci_level confidence level (default: 0.95) S7 Classes: CamelCase: MediationExtract, PmedResult Properties use snake_case: @a_path, @b_path, @ci_lower","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"code-organization","dir":"","previous_headings":"Coding Standards","what":"Code Organization","title":"CLAUDE.md for probmed Package","text":"","code":"R/ ├── aaa-imports.R           # Package imports and setup ├── classes.R               # S7 class definitions ├── generics.R              # S7 generic functions ├── methods-extract.R       # extract_mediation() methods ├── methods-pmed.R          # pmed() methods ├── methods-print.R         # print(), summary(), plot() methods ├── compute-core.R          # Core P_med computation ├── compute-bootstrap.R     # Bootstrap implementations └── utils.R                 # Utility functions"},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"s7-object-system","dir":"","previous_headings":"Code Architecture","what":"S7 Object System","title":"CLAUDE.md for probmed Package","text":"package uses S7 type-safe, modern object-oriented programming: Key S7 Classes: Properties: estimates, a_path, b_path, c_prime, vcov, data, etc. Validation rules ensure internal consistency Subclasses: MediationExtractLavaan lavaan-specific properties Properties: estimate, ci_lower, ci_upper, method, boot_estimates, etc. Validator checks P_med ∈ [0, 1] CI consistency Source tracking via source_extract property S7 Generics: Methods: stats::lm, lavaan, mediation, etc. Returns: MediationExtract object Methods: formula, MediationExtract Returns: PmedResult object","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"core-function-hierarchy","dir":"","previous_headings":"Code Architecture","what":"Core Function Hierarchy","title":"CLAUDE.md for probmed Package","text":"User-Facing Functions: Fits GLMs automatically Dispatches appropriate computation method Returns PmedResult CI pre-extracted structures flexible custom models Generic methods lm/glm, lavaan, mediation, medflex Standardizes across packages Returns MediationExtract Internal Computation Functions: .pmed_compute(): Main dispatcher .pmed_plugin(): Point estimate .pmed_parametric_boot(): Parametric bootstrap .pmed_nonparametric_boot(): Nonparametric bootstrap .pmed_core_simple(): Core P_med calculation","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"key-dependencies","dir":"","previous_headings":"Code Architecture","what":"Key Dependencies","title":"CLAUDE.md for probmed Package","text":"Required: S7: Modern object system stats: GLM fitting prediction methods: S3/S4 compatibility checks alabama: Constrained optimization (MBCO extensions) Suggested: MASS: mvrnorm() parametric bootstrap lavaan: SEM model support mediation: mediation package integration medflex: Natural effects framework support","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"explicit-namespacing","dir":"","previous_headings":"Code Architecture","what":"Explicit Namespacing","title":"CLAUDE.md for probmed Package","text":"CRITICAL: non-base functions MUST use explicit namespacing: prevents namespace conflicts makes dependencies explicit.","code":"# CORRECT stats::glm(formula, data = data) stats::coef(model) lavaan::sem(model, data = data) MASS::mvrnorm(n, mu, Sigma)  # INCORRECT glm(formula, data = data) coef(model) sem(model, data = data) mvrnorm(n, mu, Sigma)"},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"p_med-definition","dir":"","previous_headings":"Important Implementation Details","what":"P_med Definition","title":"CLAUDE.md for probmed Package","text":"treatment X, mediator M, outcome Y: Pmed=P(Yx*,Mx>Yx,Mx)P_{\\text{med}} = P(Y_{x^*, M_x} > Y_{x, M_x}) : Yx*,MxY_{x^*, M_x}: Outcome control (x*x^*) mediator treated level (MxM_x) Yx,MxY_{x, M_x}: Outcome treatment (xx) mediator treated level (MxM_x) Interpretation: Probability setting treatment control (keeping mediator treated level) increase outcome. Values > 0.5 indicate positive mediation.","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"p_med-computation-methods","dir":"","previous_headings":"Important Implementation Details","what":"P_med Computation Methods","title":"CLAUDE.md for probmed Package","text":"1. Plugin Estimator (method = \"plugin\"): Point estimate , confidence interval Fast computation via Monte Carlo integration Use quick checks inference needed 2. Parametric Bootstrap (method = \"parametric_bootstrap\"): Samples multivariate normal parameter estimates Faster nonparametric; requires normality assumption Default applications Use: n_boot = 1000 (minimum), n_boot = 5000 (recommended) 3. Nonparametric Bootstrap (method = \"nonparametric_bootstrap\"): Resamples data refits models Robust parameter distribution assumptions Computationally intensive Use sample size adequate (n > 100) parametric assumptions questionable","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"bootstrap-implementation","dir":"","previous_headings":"Important Implementation Details","what":"Bootstrap Implementation","title":"CLAUDE.md for probmed Package","text":"bootstrap methods follow pattern: Parametric: Sample N(θ̂,Σ̂)N(\\hat{\\theta}, \\hat{\\Sigma}) Nonparametric: Resample data replacement Parametric: Use sampled parameters directly Nonparametric: Refit models, extract parameters, compute P_med CI: quantiles α/2\\alpha/2 1−α/21-\\alpha/2 Point estimate: mean median bootstrap distribution Full bootstrap distribution stored @boot_estimates Enables diagnostic plots summary statistics Memory considerations: Bootstrap distributions stored memory Large n_boot many parameters can consume substantial memory n_boot > 10000, consider saving disk streaming","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"handling-interactions","dir":"","previous_headings":"Important Implementation Details","what":"Handling Interactions","title":"CLAUDE.md for probmed Package","text":"exposure-mediator interactions present (X×MX \\times M outcome model): Conditioning approach: Options condition_on_x: Numeric value: Condition specific X level \"mean\": Marginalize X distribution Vector: Multiple conditioning values (returns list) Mathematical note: interactions, P_med becomes conditional X level, mediation effect varies treatment level.","code":"pmed(   Y ~ X + M + X:M + C,   formula_m = M ~ X + C,   data = data,   treatment = \"X\",   mediator = \"M\",   condition_on_x = 0  # Evaluate P_med at X = 0 )"},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"multiple-mediators","dir":"","previous_headings":"Important Implementation Details","what":"Multiple Mediators","title":"CLAUDE.md for probmed Package","text":"Parallel mediators (M1 M2 mediate X → Y): Sequential mediators (X → M1 → M2 → Y): Requires path-specific effect definition Currently development (Phase 3) use nested counterfactuals","code":"pmed(   formula_y = Y ~ X + M1 + M2 + C,   formula_m = list(     M1 ~ X + C,     M2 ~ X + C   ),   data = data,   treatment = \"X\",   mediator = c(\"M1\", \"M2\"),   effect = \"total\"  # Total indirect effect )"},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"key-assumptions","dir":"","previous_headings":"Statistical Assumptions & Diagnostics","what":"Key Assumptions","title":"CLAUDE.md for probmed Package","text":"Mediator model: E[M|X,C] correctly specified Outcome model: E[Y|X,M,C] correctly specified Misspecification biases P_med estimate {Yx,m,Mx}⟂X|C\\{Y_{x,m}, M_x\\} \\perp X | C (exposure-outcome) Yx,m⟂M|X,CY_{x,m} \\perp M | X, C (mediator-outcome) Yx,m⟂Mx*Y_{x,m} \\perp M_{x^*} (cross-world independence) untestable assumptions; require subject-matter knowledge (̂,b̂,ĉ′)∼N(θ,Σ)(\\hat{}, \\hat{b}, \\hat{c}') \\sim N(\\theta, \\Sigma) Generally reasonable large samples (CLT) Check Q-Q plots bootstrap samples GLM families must match data types Binary outcome: use family = binomial() Count outcome: use family = poisson()","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"diagnostics","dir":"","previous_headings":"Statistical Assumptions & Diagnostics","what":"Diagnostics","title":"CLAUDE.md for probmed Package","text":"Check bootstrap distribution: Warning signs: P_med outside [0, 1]: Model misspecification likely Highly skewed bootstrap distribution: Consider nonparametric bootstrap Wide CI relative estimate: Large uncertainty, increase sample size CI includes 0.5: conclude mediation direction","code":"result <- pmed(..., method = \"parametric_bootstrap\", n_boot = 1000)  # Plot bootstrap distribution plot(result)  # Summary statistics summary(result)  # Extract bootstrap samples for custom diagnostics boot_dist <- result@boot_estimates hist(boot_dist)"},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"common-pitfalls","dir":"","previous_headings":"Statistical Assumptions & Diagnostics","what":"Common Pitfalls","title":"CLAUDE.md for probmed Package","text":"Ignoring confounders: Always adjust common causes M-Y Assuming causality association: P_med quantifies association, causation Misinterpreting P_med = 0.5: null (mediation), “50% mediation” Using plugin estimator inference: Plugin gives CI; always bootstrap Insufficient bootstrap samples: Use least n_boot = 1000, preferably 5000+","code":""},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"adding-new-extraction-methods","dir":"","previous_headings":"S7 Method Dispatch","what":"Adding New Extraction Methods","title":"CLAUDE.md for probmed Package","text":"add support new package (e.g., newpackage): Define S7 method: Add DESCRIPTION: Add conditional requirement check:","code":"#' Extract from newpackage #' #' @export S7::method(extract_mediation, newpackage::fitted_model) <- function(object,                                                                      treatment,                                                                      mediator,                                                                      data = NULL,                                                                      ...) {   # Extract parameters   params <- newpackage::get_params(object)      # Extract a, b, c' paths   a_path <- params[treatment, mediator]   b_path <- params[mediator, outcome]   c_prime <- params[treatment, outcome]      # Get variance-covariance matrix   vcov_mat <- newpackage::get_vcov(object)      # Return MediationExtract   MediationExtract(     estimates = params,     a_path = a_path,     b_path = b_path,     c_prime = c_prime,     vcov = vcov_mat,     data = data,     n_obs = newpackage::nobs(object),     source_package = \"newpackage\",     converged = newpackage::converged(object),     treatment = treatment,     mediator = mediator,     outcome = newpackage::get_outcome(object)   ) } Suggests:     newpackage if (!requireNamespace(\"newpackage\", quietly = TRUE)) {   stop(\"Package 'newpackage' needed. Install with: install.packages('newpackage')\") }"},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"creating-new-s7-classes","dir":"","previous_headings":"S7 Method Dispatch","what":"Creating New S7 Classes","title":"CLAUDE.md for probmed Package","text":"extending functionality new classes:","code":"#' New Class for Extension #' #' @export NewClass <- S7::new_class(   \"NewClass\",   package = \"probmed\",   parent = MediationExtract,  # Inherit from base class      properties = list(     # New properties specific to this class     new_property = S7::class_numeric   ),      validator = function(self) {     # Validation logic     if (self@new_property < 0) {       \"new_property must be non-negative\"     }   } )"},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"unit-tests-should-cover","dir":"","previous_headings":"Testing Strategy","what":"Unit Tests Should Cover","title":"CLAUDE.md for probmed Package","text":"Compare hand-calculated examples Verify P_med ∈ [0, 1] Check symmetry properties Test known effect sizes Parametric vs nonparametric convergence large n_boot Reproducibility set.seed() CI coverage simulations (~95% 95% CI) Memory efficiency large n_boot Property type checking works Validators catch invalid inputs Class inheritance functions correctly Identical results lavaan object vs manual specification Correct extraction different model types Proper handling constrained parameters Error handling convergence failures Small sample sizes (n < 50) Near-zero mediation effects Perfect mediation (P_med ≈ 1) Suppression effects (P_med < 0.5) Missing data handling Singular covariance matrices Correct parsing formulas interactions Multiple mediators specification Interaction detection conditioning","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"test-organization","dir":"","previous_headings":"Testing Strategy","what":"Test Organization","title":"CLAUDE.md for probmed Package","text":"","code":"tests/ ├── testthat/ │   ├── test-classes.R           # S7 class validation │   ├── test-pmed-glm.R          # GLM interface │   ├── test-pmed-bootstrap.R    # Bootstrap methods │   ├── test-extract-lavaan.R    # lavaan extraction │   ├── test-interactions.R      # Interaction models │   ├── test-multiple.R          # Multiple mediators │   └── test-edge-cases.R        # Edge cases and errors └── manual/     └── validation-simulations.R  # Long-running validation"},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"coverage-expectations","dir":"","previous_headings":"Testing Strategy","what":"Coverage Expectations","title":"CLAUDE.md for probmed Package","text":"Target: >90% test coverage Critical paths: 100% coverage P_med computation core Bootstrap: Coverage assessment via simulation studies CI coverage: within ±2% nominal level simulations","code":""},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"p_med-definition-1","dir":"","previous_headings":"Key Mathematical Formulas","what":"P_med Definition","title":"CLAUDE.md for probmed Package","text":"Pmed=P(Yx*,Mx>Yx,Mx)=∫P(Yx*,Mx>Yx,Mx|C=c)dFC(c)P_{\\text{med}} = P(Y_{x^*, M_x} > Y_{x, M_x}) = \\int P(Y_{x^*, M_x} > Y_{x, M_x} | C=c) dF_C(c)","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"simple-mediation-linear-models","dir":"","previous_headings":"Key Mathematical Formulas","what":"Simple Mediation (Linear Models)","title":"CLAUDE.md for probmed Package","text":"linear outcome model Y=β0+β1X+β2M+β3C+ϵYY = \\beta_0 + \\beta_1 X + \\beta_2 M + \\beta_3 C + \\epsilon_Y: Pmed=Φ(ab(x−x*)σY2)P_{\\text{med}} = \\Phi\\left(\\frac{ab(x - x^*)}{\\sqrt{\\sigma^2_Y}}\\right) : aa = effect X M bb = effect M Y Φ\\Phi = standard normal CDF σY2\\sigma^2_Y = residual variance Y","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"approximate-standard-error-delta-method","dir":"","previous_headings":"Key Mathematical Formulas","what":"Approximate Standard Error (Delta Method)","title":"CLAUDE.md for probmed Package","text":"parametric bootstrap, standard error approximated via: SE(Pmed)≈Varθ̂[Pmed(θ̂)]SE(P_{\\text{med}}) \\approx \\sqrt{\\text{Var}_{\\hat{\\theta}}[P_{\\text{med}}(\\hat{\\theta})]} variance computed empirically bootstrap samples.","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"with-interactions","dir":"","previous_headings":"Key Mathematical Formulas","what":"With Interactions","title":"CLAUDE.md for probmed Package","text":"Y=β0+β1X+β2M+β3XM+β4C+ϵY = \\beta_0 + \\beta_1 X + \\beta_2 M + \\beta_3 XM + \\beta_4 C + \\epsilon: Pmed(x0)=P(Yx*,Mx>Yx,Mx|X=x0)P_{\\text{med}}(x_0) = P(Y_{x^*, M_x} > Y_{x, M_x} | X = x_0) Conditioning value x0x_0 must specified; P_med varies treatment level.","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"integration-with-medrobust-package","dir":"","previous_headings":"","what":"Integration with medrobust Package","title":"CLAUDE.md for probmed Package","text":"probmed package designed work seamlessly medrobust sensitivity analysis: medrobust provide: S7 method PmedResult class Sensitivity parameters: ρ (U → M, U → Y correlation) Tipping point analysis Visualization P_med confounding scenarios","code":"library(probmed) library(medrobust)  # Compute P_med result <- pmed(   Y ~ X + M + C,   formula_m = M ~ X + C,   data = data,   treatment = \"X\",   mediator = \"M\" )  # Sensitivity analysis for unmeasured confounding sens <- medrobust::sensitivity_analysis(   result,   rho_range = seq(-0.5, 0.5, by = 0.1) )  plot(sens)"},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"key-publications","dir":"","previous_headings":"Additional Resources","what":"Key Publications","title":"CLAUDE.md for probmed Package","text":"P_med Method: Tofighi et al. (2025). P_med: scale-free effect size mediation analysis. Psychological Methods. (preparation) Causal Mediation Framework: Imai, K., Keele, L., & Tingley, D. (2010). general approach causal mediation analysis. Psychological Methods, 15(4), 309–334. VanderWeele, T. J. (2015). Explanation Causal Inference: Methods Mediation Interaction. Oxford University Press. Pearl, J. (2001). Direct indirect effects. Proceedings UAI, 411–420. Scale-Free Effect Sizes: McGraw, K. O., & Wong, S. P. (1992). common language effect size statistic. Psychological Bulletin, 111(2), 361–365. Vargha, ., & Delaney, H. D. (2000). critique improvement CL common language effect size statistics McGraw Wong. Journal Educational Behavioral Statistics, 25(2), 101–132. Multiple Mediators: VanderWeele, T. J., & Vansteelandt, S. (2014). Mediation analysis multiple mediators. European Journal Epidemiology, 29(11), 801–810. Daniel, R. M., De Stavola, B. L., Cousens, S. N., & Vansteelandt, S. (2015). Causal mediation analysis multiple mediators. Biometrics, 71(1), 1–14. Sensitivity Analysis: Imai, K., Keele, L., & Yamamoto, T. (2010). Identification, inference sensitivity analysis causal mediation effects. Statistical Science, 25(1), 51–71. VanderWeele, T. J. (2010). Bias formulas sensitivity analysis direct indirect effects. Epidemiology, 21(4), 540–551.","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"package-website","dir":"","previous_headings":"Additional Resources","what":"Package Website","title":"CLAUDE.md for probmed Package","text":"GitHub: https://github.com/data-wise/probmed Documentation: https://data-wise.github.io/probmed CRAN: (Upon release)","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"related-packages","dir":"","previous_headings":"Additional Resources","what":"Related Packages","title":"CLAUDE.md for probmed Package","text":"mediation: General mediation analysis (Tingley et al.) lavaan: Structural equation modeling (Rosseel) medflex: Natural effects models (Steen et al.) medrobust: Sensitivity analysis (Tofighi, companion package) RMediation: Confidence intervals indirect effects (Tofighi & MacKinnon)","code":""},{"path":[]},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"phase-1-core-functionality-current","dir":"","previous_headings":"Development Roadmap","what":"Phase 1: Core Functionality (Current)","title":"CLAUDE.md for probmed Package","text":"S7 class architecture Formula interface GLM Bootstrap inference methods Basic extraction lm/glm Print/summary/plot methods","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"phase-2-model-integration-weeks-6-9","dir":"","previous_headings":"Development Roadmap","what":"Phase 2: Model Integration (Weeks 6-9)","title":"CLAUDE.md for probmed Package","text":"lavaan extraction mediation package extraction medflex extraction Comprehensive testing","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"phase-3-extensions-months-3-6","dir":"","previous_headings":"Development Roadmap","what":"Phase 3: Extensions (Months 3-6)","title":"CLAUDE.md for probmed Package","text":"Exposure-mediator interactions Multiple parallel mediators Sequential mediators (path-specific) Integration medrobust","code":""},{"path":"https://data-wise.github.io/probmed/CLAUDE.html","id":"phase-4-advanced-features-future","dir":"","previous_headings":"Development Roadmap","what":"Phase 4: Advanced Features (Future)","title":"CLAUDE.md for probmed Package","text":"Longitudinal mediation High-dimensional mediators Bayesian estimation (via Stan/JAGS) Multiply robust estimation","code":""},{"path":"https://data-wise.github.io/probmed/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 probmed authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://data-wise.github.io/probmed/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Davood Tofighi. Author, maintainer.","code":""},{"path":"https://data-wise.github.io/probmed/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Tofighi D (2025). probmed: Probabilistic Effect Sizes Causal Mediation Analysis. R package version 0.0.0.9000, https://data-wise.github.io/probmed.","code":"@Manual{,   title = {probmed: Probabilistic Effect Sizes for Causal Mediation Analysis},   author = {Davood Tofighi},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://data-wise.github.io/probmed}, }"},{"path":"https://data-wise.github.io/probmed/index.html","id":"probmed","dir":"","previous_headings":"","what":"probmed: Probabilistic Effect Sizes for Mediation","title":"probmed: Probabilistic Effect Sizes for Mediation","text":"goal probmed provide robust flexible framework computing P_med, scale-free probabilistic effect size causal mediation analysis. Unlike traditional effect sizes, P_med offers intuitive interpretation mediation effect terms probability, making applicable across various model types (linear, GLM, etc.).","code":""},{"path":"https://data-wise.github.io/probmed/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"probmed: Probabilistic Effect Sizes for Mediation","text":"Scale-Free Effect Size: Computes P_med, interpretable regardless scale variables. Flexible Modeling: Supports linear generalized linear models (GLMs) mediator outcome. Modern Architecture: Built using S7 object-oriented system robustness extensibility. Inference Methods: Includes parametric bootstrap, nonparametric bootstrap, plug-estimators.","code":""},{"path":"https://data-wise.github.io/probmed/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"probmed: Probabilistic Effect Sizes for Mediation","text":"can install development version probmed GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"dtofighi/probmed\")"},{"path":"https://data-wise.github.io/probmed/index.html","id":"quick-example","dir":"","previous_headings":"","what":"Quick Example","title":"probmed: Probabilistic Effect Sizes for Mediation","text":"basic example showing simulate data compute P_med using parametric bootstrap approach:","code":"library(probmed)  # 1. Simulate data set.seed(123) n <- 300 data <- data.frame(X = rnorm(n), C = rnorm(n)) # Mediator model: M ~ X + C data$M <- 0.5 * data$X + 0.3 * data$C + rnorm(n) # Outcome model: Y ~ M + X + C data$Y <- 0.4 * data$M + 0.2 * data$X + 0.2 * data$C + rnorm(n)  # 2. Compute P_med # We specify the outcome model formula (first arg) and the mediator model formula. result <- pmed(   Y ~ X + M + C,   formula_m = M ~ X + C,   data = data,   treatment = \"X\",   mediator = \"M\",   method = \"parametric_bootstrap\",   n_boot = 1000,   seed = 42 )  # 3. View Results print(result) #> <probmed::PmedResult> #>  @ estimate      : num 0 #>  @ ci_lower      : Named num 0 #>  .. - attr(*, \"names\")= chr \"2.5%\" #>  @ ci_upper      : Named num 0 #>  .. - attr(*, \"names\")= chr \"97.5%\" #>  @ ci_level      : num 0.95 #>  @ method        : chr \"parametric_bootstrap\" #>  @ n_boot        : int 1000 #>  @ boot_estimates: num [1:1000] 0 0 0 0 0 0 0 0 0 0 ... #>  @ x_ref         : num 0 #>  @ x_value       : num 1 #>  @ source_extract: <probmed::MediationExtract> #>  .. @ estimates          : Named num [1:7] 0.0188 0.4478 0.2553 0.0244 0.2045 ... #>  .. .. - attr(*, \"names\")= chr [1:7] \"(Intercept)\" \"X\" \"C\" \"(Intercept)\" ... #>  .. @ mediator_predictors: chr [1:3] \"(Intercept)\" \"X\" \"C\" #>  .. @ outcome_predictors : chr [1:4] \"(Intercept)\" \"X\" \"M\" \"C\" #>  .. @ a_path             : num 0.448 #>  .. @ b_path             : num 0.446 #>  .. @ c_prime            : num 0.204 #>  .. @ vcov               : num [1:7, 1:7] 3.58e-03 -1.41e-04 -4.15e-05 0.00 0.00 ... #>  .. @ data               :'data.frame':  300 obs. of  4 variables: #>  .. .. $ X: num  -0.5605 -0.2302 1.5587 0.0705 0.1293 ... #>  .. .. $ C: num  -0.715 -0.753 -0.939 -1.053 -0.437 ... #>  .. .. $ M: num  0.579 -0.368 0.464 -1.797 0.724 ... #>  .. .. $ Y: num  -1.038 -1.135 0.609 0.724 1.313 ... #>  .. @ n_obs              : int 300 #>  .. @ source_package     : chr \"stats\" #>  .. @ converged          : logi TRUE #>  .. @ treatment          : chr \"X\" #>  .. @ mediator           : chr \"M\" #>  .. @ outcome            : chr \"Y\" #>  @ converged     : logi TRUE #>  @ call          : language `method(pmed, new_S3_class(\"formula\"))`(object = Y ~ X + M + C, formula_m = ..1,      data = ..2, treatment = \"X\"| __truncated__ ... summary(result) #>              Length              Class1              Class2                Mode  #>                   1 probmed::PmedResult           S7_object              object"},{"path":"https://data-wise.github.io/probmed/index.html","id":"advanced-usage","dir":"","previous_headings":"","what":"Advanced Usage","title":"probmed: Probabilistic Effect Sizes for Mediation","text":"probmed allows specify different families GLMs (e.g., binomial binary outcomes) customize reference values treatment effect.","code":"# Example with binary outcome (not run) # result_bin <- pmed( #   Y ~ X + M + C, #   formula_m = M ~ X + C, #   data = data_bin, #   family_y = binomial(), #   treatment = \"X\", #   mediator = \"M\" # )"},{"path":"https://data-wise.github.io/probmed/reference/MediationExtract.html","id":null,"dir":"Reference","previous_headings":"","what":"Mediation Extract Base Class — MediationExtract","title":"Mediation Extract Base Class — MediationExtract","text":"S7 class extracted mediation structures fitted models.","code":""},{"path":"https://data-wise.github.io/probmed/reference/MediationExtract.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mediation Extract Base Class — MediationExtract","text":"","code":"MediationExtract(   estimates = integer(0),   mediator_predictors = character(0),   outcome_predictors = character(0),   a_path = integer(0),   b_path = integer(0),   c_prime = integer(0),   vcov = NULL,   sigma_m = integer(0),   sigma_y = integer(0),   data = (function (.data = list(), row.names = NULL)   {      if (is.null(row.names)) {              list2DF(.data)      }      else {          out <- list2DF(.data,     length(row.names)) attr(out, \"row.names\") <- row.names          out      }      })(),   n_obs = integer(0),   source_package = character(0),   converged = logical(0),   treatment = character(0),   mediator = character(0),   outcome = character(0) )"},{"path":"https://data-wise.github.io/probmed/reference/MediationExtract.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mediation Extract Base Class — MediationExtract","text":"estimates Numeric vector model parameter estimates mediator_predictors Character vector mediator model predictor names outcome_predictors Character vector outcome model predictor names a_path Numeric: treatment effect mediator (path) b_path Numeric: mediator effect outcome (b path) c_prime Numeric: direct effect treatment outcome (c' path) vcov Variance-covariance matrix parameter estimates sigma_m Numeric: residual standard deviation mediator model sigma_y Numeric: residual standard deviation outcome model data Data frame used model fitting n_obs Integer: number observations source_package Character: name package created models converged Logical: model(s) converge treatment Character: name treatment variable mediator Character: name mediator variable outcome Character: name outcome variable","code":""},{"path":"https://data-wise.github.io/probmed/reference/PmedResult.html","id":null,"dir":"Reference","previous_headings":"","what":"P_med Result Class — PmedResult","title":"P_med Result Class — PmedResult","text":"S7 class P_med computation results.","code":""},{"path":"https://data-wise.github.io/probmed/reference/PmedResult.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"P_med Result Class — PmedResult","text":"","code":"PmedResult(   estimate = integer(0),   ci_lower = integer(0),   ci_upper = integer(0),   ci_level = integer(0),   method = character(0),   n_boot = NA_integer_,   boot_estimates = numeric(0),   x_ref = integer(0),   x_value = integer(0),   source_extract = MediationExtract(),   converged = logical(0),   call = NULL )"},{"path":"https://data-wise.github.io/probmed/reference/PmedResult.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"P_med Result Class — PmedResult","text":"estimate Numeric: P_med point estimate ci_lower Numeric: lower bound confidence interval ci_upper Numeric: upper bound confidence interval ci_level Numeric: confidence level (e.g., 0.95) method Character: inference method used n_boot Integer: number bootstrap samples (NA bootstrap) boot_estimates Numeric vector: bootstrap distribution (empty bootstrap) x_ref Numeric: reference treatment value x_value Numeric: treatment value contrast source_extract MediationExtract object: source estimates converged Logical: computation converge call Call object: original function call","code":""},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_compute.html","id":null,"dir":"Reference","previous_headings":"","what":"Core P_med Computation Dispatcher — .pmed_compute","title":"Core P_med Computation Dispatcher — .pmed_compute","text":"Core P_med Computation Dispatcher","code":""},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_compute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Core P_med Computation Dispatcher — .pmed_compute","text":"","code":".pmed_compute(extract, x_ref, x_value, method, n_boot, ci_level, seed, ...)"},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_core_simple.html","id":null,"dir":"Reference","previous_headings":"","what":"Simple P_med Core Computation — .pmed_core_simple","title":"Simple P_med Core Computation — .pmed_core_simple","text":"Simple P_med Core Computation","code":""},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_core_simple.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simple P_med Core Computation — .pmed_core_simple","text":"","code":".pmed_core_simple(   a,   b,   c_prime,   x_ref,   x_value,   sigma_y = 1,   sigma_m = 1,   n_sim = 10000 )"},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_nonparametric_boot.html","id":null,"dir":"Reference","previous_headings":"","what":"Nonparametric Bootstrap for P_med — .pmed_nonparametric_boot","title":"Nonparametric Bootstrap for P_med — .pmed_nonparametric_boot","text":"Nonparametric Bootstrap P_med","code":""},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_nonparametric_boot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Nonparametric Bootstrap for P_med — .pmed_nonparametric_boot","text":"","code":".pmed_nonparametric_boot(extract, x_ref, x_value, n_boot, ci_level, seed, ...)"},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_parametric_boot.html","id":null,"dir":"Reference","previous_headings":"","what":"Parametric Bootstrap for P_med — .pmed_parametric_boot","title":"Parametric Bootstrap for P_med — .pmed_parametric_boot","text":"Parametric Bootstrap P_med","code":""},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_parametric_boot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parametric Bootstrap for P_med — .pmed_parametric_boot","text":"","code":".pmed_parametric_boot(extract, x_ref, x_value, n_boot, ci_level, seed, ...)"},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_plugin.html","id":null,"dir":"Reference","previous_headings":"","what":"Plugin Estimator (Point Estimate Only) — .pmed_plugin","title":"Plugin Estimator (Point Estimate Only) — .pmed_plugin","text":"Plugin Estimator (Point Estimate )","code":""},{"path":"https://data-wise.github.io/probmed/reference/dot-pmed_plugin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plugin Estimator (Point Estimate Only) — .pmed_plugin","text":"","code":".pmed_plugin(extract, x_ref, x_value, n_sim = 10000, ...)"},{"path":"https://data-wise.github.io/probmed/reference/extract_mediation-lm.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract from GLM/LM — extract_mediation-lm","title":"Extract from GLM/LM — extract_mediation-lm","text":"Extract GLM/LM","code":""},{"path":"https://data-wise.github.io/probmed/reference/extract_mediation.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Mediation Structure — extract_mediation","title":"Extract Mediation Structure — extract_mediation","text":"Generic function extract mediation structure fitted models. See method documentation specific arguments.","code":""},{"path":"https://data-wise.github.io/probmed/reference/extract_mediation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Mediation Structure — extract_mediation","text":"","code":"extract_mediation(object, ...)"},{"path":"https://data-wise.github.io/probmed/reference/extract_mediation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Mediation Structure — extract_mediation","text":"object Fitted model object ... Additional arguments passed methods","code":""},{"path":"https://data-wise.github.io/probmed/reference/extract_mediation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Mediation Structure — extract_mediation","text":"MediationExtract object","code":""},{"path":"https://data-wise.github.io/probmed/reference/lm_class.html","id":null,"dir":"Reference","previous_headings":"","what":"S3 Class Wrappers for S7 — lm_class","title":"S3 Class Wrappers for S7 — lm_class","text":"S7 wrappers S3 classes used method dispatch","code":""},{"path":"https://data-wise.github.io/probmed/reference/lm_class.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"S3 Class Wrappers for S7 — lm_class","text":"","code":"lm_class"},{"path":"https://data-wise.github.io/probmed/reference/lm_class.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"S3 Class Wrappers for S7 — lm_class","text":"object class S7_S3_class length 3.","code":""},{"path":"https://data-wise.github.io/probmed/reference/null-coalesce.html","id":null,"dir":"Reference","previous_headings":"","what":"Null coalescing operator — null-coalesce","title":"Null coalescing operator — null-coalesce","text":"Null coalescing operator","code":""},{"path":"https://data-wise.github.io/probmed/reference/null-coalesce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Null coalescing operator — null-coalesce","text":"","code":"x %||% y"},{"path":"https://data-wise.github.io/probmed/reference/plot-PmedResult.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Bootstrap Distribution — plot-PmedResult","title":"Plot Bootstrap Distribution — plot-PmedResult","text":"Plot Bootstrap Distribution","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed-MediationExtract.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute P_med from MediationExtract — pmed-MediationExtract","title":"Compute P_med from MediationExtract — pmed-MediationExtract","text":"Compute P_med MediationExtract","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed-formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute P_med from Formula — pmed-formula","title":"Compute P_med from Formula — pmed-formula","text":"Compute P_med Formula","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed-formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute P_med from Formula — pmed-formula","text":"object Formula outcome model (Y ~ X + M + C) formula_m Formula mediator model (M ~ X + C) data Data frame treatment Character: treatment variable name mediator Character: mediator variable name family_y Family outcome model (default: gaussian()) family_m Family mediator model (default: gaussian()) x_ref Reference treatment value (default: 0) x_value Treatment value (default: 1) method Inference method: \"parametric_bootstrap\", \"nonparametric_bootstrap\", \"plugin\" n_boot Number bootstrap samples (default: 1000) ci_level Confidence level (default: 0.95) seed Random seed reproducibility ... Additional arguments","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed-formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute P_med from Formula — pmed-formula","text":"PmedResult object","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed-formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute P_med from Formula — pmed-formula","text":"","code":"if (FALSE) { # \\dontrun{ # Simulate data set.seed(123) n <- 300 data <- data.frame(   X = rnorm(n),   C = rnorm(n) ) data$M <- 0.5 * data$X + 0.3 * data$C + rnorm(n) data$Y <- 0.4 * data$M + 0.2 * data$X + 0.2 * data$C + rnorm(n)  # Compute P_med result <- pmed(   Y ~ X + M + C,   formula_m = M ~ X + C,   data = data,   treatment = \"X\",   mediator = \"M\" ) print(result) } # }"},{"path":"https://data-wise.github.io/probmed/reference/pmed.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute P_med — pmed","title":"Compute P_med — pmed","text":"Generic function compute P_med various inputs.","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute P_med — pmed","text":"","code":"pmed(object, ...)"},{"path":"https://data-wise.github.io/probmed/reference/pmed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute P_med — pmed","text":"object Either formula, MediationExtract, fitted model ... Additional arguments passed methods","code":""},{"path":"https://data-wise.github.io/probmed/reference/pmed.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute P_med — pmed","text":"PmedResult object","code":""},{"path":"https://data-wise.github.io/probmed/reference/print-PmedResult.html","id":null,"dir":"Reference","previous_headings":"","what":"Print PmedResult — print-PmedResult","title":"Print PmedResult — print-PmedResult","text":"Print PmedResult","code":""},{"path":"https://data-wise.github.io/probmed/reference/probmed-package.html","id":null,"dir":"Reference","previous_headings":"","what":"probmed: Probabilistic Effect Sizes for Causal Mediation Analysis — probmed-package","title":"probmed: Probabilistic Effect Sizes for Causal Mediation Analysis — probmed-package","text":"Compute P_med, scale-free probabilistic effect size causal mediation analysis. Compute P_med, scale-free probabilistic effect size causal mediation analysis. P_med = P(Y_{x*,M_x} > Y_{x,M_x}) represents probability outcome treatment mediator control level exceeds outcome control. Compute P_med, scale-free probabilistic effect size causal mediation analysis.","code":""},{"path":"https://data-wise.github.io/probmed/reference/probmed-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"probmed: Probabilistic Effect Sizes for Causal Mediation Analysis — probmed-package","text":"Maintainer: Davood Tofighi dtofighi@gmail.com (ORCID)","code":""},{"path":"https://data-wise.github.io/probmed/reference/summary-PmedResult.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary Method — summary-PmedResult","title":"Summary Method — summary-PmedResult","text":"Summary Method","code":""}]
