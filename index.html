<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>probmed: Probabilistic Effect Sizes for Mediation • probmed</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="deps/Montserrat-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="probmed: Probabilistic Effect Sizes for Mediation">
<meta name="description" content="Compute P_med, a scale-free probabilistic effect size for causal mediation analysis. Modern S7-based architecture with bootstrap inference, GLM support, and seamless integration with lavaan and mediation packages.
">
<meta property="og:description" content="Compute P_med, a scale-free probabilistic effect size for causal mediation analysis. Modern S7-based architecture with bootstrap inference, GLM support, and seamless integration with lavaan and mediation packages.
">
<meta property="og:image" content="https://data-wise.github.io/probmed/reference/figures/logo.png">
<meta property="og:image:alt" content="probmed: Probabilistic Effect Sizes for Mediation Analysis">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@dtofighi">
<meta name="twitter:site" content="@dtofighi">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">probmed</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><a class="dropdown-item" href="articles/introduction.html">Introduction to probmed</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>─────────────</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>Integration Guides</h6></li>
    <li><a class="dropdown-item" href="articles/lavaan-integration.html">lavaan Integration</a></li>
    <li><a class="dropdown-item" href="articles/mediation-integration.html">mediation Package Integration</a></li>
    <li><a class="dropdown-item" href="articles/package-comparison.html">Package Comparison</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/data-wise/probmed" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="probmed-">probmed <a class="anchor" aria-label="anchor" href="#probmed-"></a>
</h1>
</div>
<!-- badges: start -->

<p><strong>probmed</strong> provides a robust framework for computing <strong><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math></strong>, a scale-free probabilistic effect size for causal mediation analysis.</p>
<div class="section level2">
<h2 id="what-is-p_med">What is <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math>?<a class="anchor" aria-label="anchor" href="#what-is-p_med"></a>
</h2>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math> offers an intuitive alternative to traditional mediation effect sizes. It represents the probability that the outcome for an individual in the treatment group is higher than the outcome for an individual in the control group, specifically due to the indirect path through the mediator.</p>
<p>Unlike the “Proportion Mediated” or simple indirect effect coefficients, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math>: * <strong>Is Scale-Free</strong>: Interpretable regardless of the units of measurement for <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math>, or <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>. * <strong>Is Bounded</strong>: Always falls between 0 and 1 (or 0 and 0.5 for some definitions), making it comparable across studies. * <strong>Handles Non-Linearity</strong>: Can be extended to Generalized Linear Models (GLMs) where coefficients are not directly comparable.</p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li>
<strong>Flexible Modeling</strong>: Supports both <strong>Linear Models (LM)</strong> and <strong>Generalized Linear Models (GLM)</strong> (e.g., Logistic, Poisson) for the mediator and outcome.</li>
<li>
<strong>Comprehensive Effect Reporting</strong>: Provides both <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math> (probabilistic effect size) and the traditional Indirect Effect (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>×</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \times b</annotation></semantics></math>) with bootstrap confidence intervals.</li>
<li>
<strong>Robust Inference</strong>: Implements multiple methods for constructing confidence intervals:
<ul>
<li>
<strong>Parametric Bootstrap</strong>: Efficient and accurate for large samples with known distributions.</li>
<li>
<strong>Nonparametric Bootstrap</strong>: Robust to distributional assumptions (resampling-based).</li>
<li>
<strong>Plug-in Estimator</strong>: Fast point estimation.</li>
</ul>
</li>
<li>
<strong>Modern Architecture</strong>: Built on the <strong>S7</strong> object-oriented system, ensuring type safety, stability, and easy extensibility.</li>
<li>
<strong>Ecosystem Integration</strong>: Works seamlessly with popular R packages:
<ul>
<li>
<strong>lavaan</strong>: Extract from Structural Equation Models with FIML and robust estimators</li>
<li>
<strong>mediation</strong>: Direct integration with <code><a href="https://rdrr.io/pkg/mediation/man/mediate.html" class="external-link">mediate()</a></code> objects</li>
<li>Standard <strong>lm/glm</strong>: Native support for regression models</li>
</ul>
</li>
<li>
<strong>User-Friendly Interface</strong>: Designed to work with standard R <code>formula</code> interfaces and <code>data.frame</code> inputs.</li>
</ul>
</div>
<div class="section level2">
<h2 id="mediationverse-ecosystem">Mediationverse Ecosystem<a class="anchor" aria-label="anchor" href="#mediationverse-ecosystem"></a>
</h2>
<p><strong>probmed</strong> is part of the <strong>mediationverse</strong> ecosystem for mediation analysis in R:</p>
<table class="table">
<colgroup>
<col width="37%">
<col width="37%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>Package</th>
<th>Purpose</th>
<th>Role</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://github.com/data-wise/medfit" class="external-link"><strong>medfit</strong></a></td>
<td>Model fitting, extraction, bootstrap</td>
<td>Foundation</td>
</tr>
<tr class="even">
<td>
<strong>probmed</strong> (this)</td>
<td>Probabilistic effect size (P_med)</td>
<td>Application</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/data-wise/rmediation" class="external-link"><strong>RMediation</strong></a></td>
<td>Confidence intervals (DOP, MBCO)</td>
<td>Application</td>
</tr>
<tr class="even">
<td><a href="https://github.com/data-wise/medrobust" class="external-link"><strong>medrobust</strong></a></td>
<td>Sensitivity analysis</td>
<td>Application</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/data-wise/medsim" class="external-link"><strong>medsim</strong></a></td>
<td>Simulation infrastructure</td>
<td>Support</td>
</tr>
</tbody>
</table>
<p>See <a href="https://github.com/data-wise/medfit/blob/main/planning/ECOSYSTEM.md" class="external-link">Ecosystem Coordination</a> for version compatibility and development guidelines.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of probmed from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"data-wise/probmed"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-example">Quick Example<a class="anchor" aria-label="anchor" href="#quick-example"></a>
</h2>
<p>Here is a basic example showing how to simulate data and compute <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math> using a parametric bootstrap approach.</p>
<div class="section level3">
<h3 id="id_1-simulate-data">1. Simulate Data<a class="anchor" aria-label="anchor" href="#id_1-simulate-data"></a>
</h3>
<p>First, we generate a dataset with a continuous treatment (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>), mediator (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math>), and outcome (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>), along with a covariate (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>C</mi><annotation encoding="application/x-tex">C</annotation></semantics></math>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://data-wise.github.io/probmed/">probmed</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">300</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, C <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mediator model: M ~ X + C</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">M</span> <span class="op">&lt;-</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">X</span> <span class="op">+</span> <span class="fl">0.3</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">C</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Outcome model: Y ~ M + X + C</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="fl">0.4</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">M</span> <span class="op">+</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">X</span> <span class="op">+</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">C</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_2-compute-p_med">2. Compute <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math><a class="anchor" aria-label="anchor" href="#id_2-compute-p_med"></a>
</h3>
<p>We use the <code><a href="reference/pmed.html">pmed()</a></code> function to estimate the effect size. We specify the models for the outcome and mediator, and select the bootstrap method.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span></span>
<span>  <span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span> <span class="op">+</span> <span class="va">C</span>,             <span class="co"># Outcome model formula</span></span>
<span>  formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">C</span>,     <span class="co"># Mediator model formula</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  mediator <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"parametric_bootstrap"</span>,</span>
<span>  n_boot <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-view-results">3. View Results<a class="anchor" aria-label="anchor" href="#id_3-view-results"></a>
</h3>
<p>The results object provides a clear summary of both <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math> and the Indirect Effect with confidence intervals.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; P_med: Probability of Mediated Shift</span></span>
<span><span class="co">#&gt; ====================================</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Estimate: 0.563</span></span>
<span><span class="co">#&gt; 95% CI: [0.520, 0.605]</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Indirect Effect (Product of Coefficients):</span></span>
<span><span class="co">#&gt; Estimate: 0.198</span></span>
<span><span class="co">#&gt; 95% CI: [0.134, 0.268]</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Inference: parametric_bootstrap</span></span>
<span><span class="co">#&gt; Bootstrap samples: 1000</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Treatment contrast: X = 1 vs. X* = 0</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Interpretation:</span></span>
<span><span class="co">#&gt;   P(Y_{X*, M_X} &gt; Y_{X, M_X}) = 0.563</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
<p><strong>Interpretation</strong>: - <strong><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mrow><mi>m</mi><mi>e</mi><mi>d</mi></mrow></msub><annotation encoding="application/x-tex">P_{med}</annotation></semantics></math> = 0.563</strong>: There is a 56.3% probability that a treated individual will have a higher outcome than a control individual through the indirect path. Since 0.50 represents “no effect” (random chance), this indicates a positive mediation effect. - <strong>Indirect Effect = 0.198</strong>: The traditional product-of-coefficients indirect effect (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>×</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \times b</annotation></semantics></math>) quantifies the average change in outcome due to the mediated path.</p>
</div>
</div>
<div class="section level2">
<h2 id="workflow-options">Workflow Options<a class="anchor" aria-label="anchor" href="#workflow-options"></a>
</h2>
<p><code>probmed</code> offers three workflow approaches to suit your needs:</p>
<div class="section level3">
<h3 id="id_1-formula-interface-recommended-for-most-users">1. Formula Interface (Recommended for Most Users)<a class="anchor" aria-label="anchor" href="#id_1-formula-interface-recommended-for-most-users"></a>
</h3>
<p>Directly specify your models using R formulas:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span></span>
<span>  <span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span> <span class="op">+</span> <span class="va">C</span>,             <span class="co"># Outcome model</span></span>
<span>  formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">C</span>,     <span class="co"># Mediator model</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  mediator <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"parametric_bootstrap"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_2-integration-with-lavaan-for-sem-users">2. Integration with lavaan (For SEM Users)<a class="anchor" aria-label="anchor" href="#id_2-integration-with-lavaan-for-sem-users"></a>
</h3>
<p>Extract from fitted Structural Equation Models with full support for FIML, robust estimators, and standardized estimates:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define SEM model</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  M ~ a*X + C</span></span>
<span><span class="st">  Y ~ b*M + cp*X + C</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="co"># Fit with FIML for missing data</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">model</span>, data <span class="op">=</span> <span class="va">data</span>, missing <span class="op">=</span> <span class="st">"fiml"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract and compute P_med</span></span>
<span><span class="va">extract</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/extract_mediation.html">extract_mediation</a></span><span class="op">(</span><span class="va">fit</span>, treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span><span class="va">extract</span>, method <span class="op">=</span> <span class="st">"parametric_bootstrap"</span>, n_boot <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-integration-with-mediation-package">3. Integration with mediation Package<a class="anchor" aria-label="anchor" href="#id_3-integration-with-mediation-package"></a>
</h3>
<p>Seamlessly work with objects from the <code>mediation</code> package:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://imai.princeton.edu/projects/mechanisms.html" class="external-link">mediation</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit models</span></span>
<span><span class="va">model_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">M</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">C</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">model_y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">M</span> <span class="op">+</span> <span class="va">X</span> <span class="op">+</span> <span class="va">C</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run mediate</span></span>
<span><span class="va">med_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mediation/man/mediate.html" class="external-link">mediate</a></span><span class="op">(</span><span class="va">model_m</span>, <span class="va">model_y</span>, treat <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span>, boot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compute P_med from mediate object</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span><span class="fu"><a href="reference/extract_mediation.html">extract_mediation</a></span><span class="op">(</span><span class="va">med_out</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="advanced-features">Advanced Features<a class="anchor" aria-label="anchor" href="#advanced-features"></a>
</h2>
<div class="section level3">
<h3 id="generalized-linear-models-glms">Generalized Linear Models (GLMs)<a class="anchor" aria-label="anchor" href="#generalized-linear-models-glms"></a>
</h3>
<p><code>probmed</code> supports GLMs for non-normal outcomes. For example, with a binary outcome:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Binary outcome example</span></span>
<span><span class="va">data_bin</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span><span class="va">data_bin</span><span class="op">$</span><span class="va">Y_binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">0.4</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">M</span> <span class="op">+</span> <span class="fl">0.2</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">X</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span></span>
<span>  <span class="va">Y_binary</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span> <span class="op">+</span> <span class="va">C</span>,</span>
<span>  formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">C</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_bin</span>,</span>
<span>  family_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span>,    <span class="co"># Logistic regression for binary outcome</span></span>
<span>  treatment <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  mediator <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"parametric_bootstrap"</span>,</span>
<span>  n_boot <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_bin</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bootstrap-methods-comparison">Bootstrap Methods Comparison<a class="anchor" aria-label="anchor" href="#bootstrap-methods-comparison"></a>
</h3>
<p><strong>When to use each method:</strong></p>
<ul>
<li>
<strong>Plugin</strong> (<code>method = "plugin"</code>): Fast point estimates only, no confidence intervals. Use for quick exploration.</li>
<li>
<strong>Parametric Bootstrap</strong> (<code>method = "parametric_bootstrap"</code>): Default choice. Fast and accurate when parameter estimates are approximately normally distributed.</li>
<li>
<strong>Nonparametric Bootstrap</strong> (<code>method = "nonparametric_bootstrap"</code>): More robust to distributional assumptions but computationally intensive. Use when parametric assumptions are questionable.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare methods</span></span>
<span><span class="va">result_plugin</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span>, formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span>, data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                      treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span>, method <span class="op">=</span> <span class="st">"plugin"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_param</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span>, formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span>, data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                     treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>                     method <span class="op">=</span> <span class="st">"parametric_bootstrap"</span>, n_boot <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result_nonparam</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pmed.html">pmed</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span>, formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span>, data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                        treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>                        method <span class="op">=</span> <span class="st">"nonparametric_bootstrap"</span>, n_boot <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Tofighi, D. (In Press). <em>Probabilistic Effect Sizes for Mediation Analysis</em>.</li>
<li>MacKinnon, D. P. (2008). <em>Introduction to Statistical Mediation Analysis</em>. Lawrence Erlbaum Associates.</li>
</ul>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>We welcome contributions! Please see the <a href="https://github.com/data-wise/probmed/issues" class="external-link">Issue Tracker</a> for potential features or bug reports.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/data-wise/probmed/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/data-wise/probmed/issues" class="external-link">Report a bug</a></li>
<li><a href="https://github.com/data-wise/probmed" class="external-link">Source Code</a></li>
<li><a href="https://github.com/data-wise/probmed/issues" class="external-link">Report Issues</a></li>
<li><a href="https://github.com/data-wise/probmed/issues/new" class="external-link">Request Feature</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing probmed</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://orcid.org/0000-0001-8523-7776" class="external-link"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" height="16" width="16" alt="ORCID iD icon"> Davood Tofighi</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8523-7776" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=probmed" class="external-link"><img src="https://www.r-pkg.org/badges/version/probmed.png" alt="CRAN status"></a></li>
<li><a href="https://data-wise.github.io/probmed/"><img src="https://img.shields.io/website?url=https%3A%2F%2Fdata-wise.github.io%2Fprobmed%2F" alt="Website Status"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/data-wise/probmed/actions/workflows/rhub.yaml" class="external-link"><img src="https://github.com/data-wise/probmed/actions/workflows/rhub.yaml/badge.svg" alt="R-hub"></a></li>
<li><a href="https://github.com/data-wise/probmed/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/data-wise/probmed/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0001-8523-7776" class="external-link">Davood Tofighi</a> Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Version {version}</p>
</div>

    </footer>
</div>





  </body>
</html>
