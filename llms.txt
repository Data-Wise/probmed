# probmed

The goal of `probmed` is to provide a robust and flexible framework for
computing **P_med**, a scale-free probabilistic effect size for causal
mediation analysis. Unlike traditional effect sizes, P_med offers an
intuitive interpretation of the mediation effect in terms of
probability, making it applicable across various model types (linear,
GLM, etc.).

## Features

- **Scale-Free Effect Size**: Computes P_med, which is interpretable
  regardless of the scale of the variables.
- **Flexible Modeling**: Supports both linear and generalized linear
  models (GLMs) for mediator and outcome.
- **Modern Architecture**: Built using the **S7** object-oriented system
  for robustness and extensibility.
- **Inference Methods**: Includes parametric bootstrap, nonparametric
  bootstrap, and plug-in estimators.

## Installation

You can install the development version of probmed from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("dtofighi/probmed")
```

## Quick Example

Here is a basic example showing how to simulate data and compute P_med
using a parametric bootstrap approach:

``` r
library(probmed)

# 1. Simulate data
set.seed(123)
n <- 300
data <- data.frame(X = rnorm(n), C = rnorm(n))
# Mediator model: M ~ X + C
data$M <- 0.5 * data$X + 0.3 * data$C + rnorm(n)
# Outcome model: Y ~ M + X + C
data$Y <- 0.4 * data$M + 0.2 * data$X + 0.2 * data$C + rnorm(n)

# 2. Compute P_med
# We specify the outcome model formula (first arg) and the mediator model formula.
result <- pmed(
  Y ~ X + M + C,
  formula_m = M ~ X + C,
  data = data,
  treatment = "X",
  mediator = "M",
  method = "parametric_bootstrap",
  n_boot = 1000,
  seed = 42
)

# 3. View Results
print(result)
summary(result)
```

## Advanced Usage

`probmed` allows you to specify different families for GLMs (e.g.,
binomial for binary outcomes) and customize the reference values for the
treatment effect.

``` r
# Example with binary outcome (not run)
# result_bin <- pmed(
#   Y ~ X + M + C,
#   formula_m = M ~ X + C,
#   data = data_bin,
#   family_y = binomial(),
#   treatment = "X",
#   mediator = "M"
# )
```

# Package index

## âš¡ Core Functions

Main user-facing functions for computing P_med and extracting mediation
structures from fitted models.

- [`pmed()`](https://data-wise.github.io/probmed/reference/pmed.md) :
  Compute P_med
- [`pmed-formula`](https://data-wise.github.io/probmed/reference/pmed-formula.md)
  : Compute P_med from Formula
- [`pmed-MediationExtract`](https://data-wise.github.io/probmed/reference/pmed-MediationExtract.md)
  : Compute P_med from MediationExtract
- [`extract_mediation()`](https://data-wise.github.io/probmed/reference/extract_mediation.md)
  : Extract Mediation Structure
- [`extract_mediation-lm`](https://data-wise.github.io/probmed/reference/extract_mediation-lm.md)
  : Extract from GLM/LM

## ðŸ—ï¸ S7 Classes

S7 class definitions for type-safe, modern mediation analysis. These
classes provide the foundation for the packageâ€™s object-oriented
architecture.

- [`MediationExtract()`](https://data-wise.github.io/probmed/reference/MediationExtract.md)
  : Mediation Extract Base Class
- [`PmedResult()`](https://data-wise.github.io/probmed/reference/PmedResult.md)
  : P_med Result Class

## ðŸ”§ Methods & Utilities

S7 methods for printing, summarizing, and visualizing results. These
make working with probmed objects intuitive and informative.

- [`print-PmedResult`](https://data-wise.github.io/probmed/reference/print-PmedResult.md)
  : Print PmedResult
- [`summary-PmedResult`](https://data-wise.github.io/probmed/reference/summary-PmedResult.md)
  : Summary Method
- [`plot-PmedResult`](https://data-wise.github.io/probmed/reference/plot-PmedResult.md)
  : Plot Bootstrap Distribution

## ðŸ”¬ Internal Functions

Internal computation functions. These are exported for transparency but
most users wonâ€™t need to call them directly.

- [`MediationExtract()`](https://data-wise.github.io/probmed/reference/MediationExtract.md)
  : Mediation Extract Base Class
- [`PmedResult()`](https://data-wise.github.io/probmed/reference/PmedResult.md)
  : P_med Result Class
- [`extract_mediation-lm`](https://data-wise.github.io/probmed/reference/extract_mediation-lm.md)
  : Extract from GLM/LM
- [`extract_mediation()`](https://data-wise.github.io/probmed/reference/extract_mediation.md)
  : Extract Mediation Structure
- [`plot-PmedResult`](https://data-wise.github.io/probmed/reference/plot-PmedResult.md)
  : Plot Bootstrap Distribution
- [`pmed-MediationExtract`](https://data-wise.github.io/probmed/reference/pmed-MediationExtract.md)
  : Compute P_med from MediationExtract
- [`pmed-formula`](https://data-wise.github.io/probmed/reference/pmed-formula.md)
  : Compute P_med from Formula
- [`pmed()`](https://data-wise.github.io/probmed/reference/pmed.md) :
  Compute P_med
- [`print-PmedResult`](https://data-wise.github.io/probmed/reference/print-PmedResult.md)
  : Print PmedResult
- [`summary-PmedResult`](https://data-wise.github.io/probmed/reference/summary-PmedResult.md)
  : Summary Method
- [`.pmed_compute()`](https://data-wise.github.io/probmed/reference/dot-pmed_compute.md)
  : Core P_med Computation Dispatcher
- [`.pmed_core_simple()`](https://data-wise.github.io/probmed/reference/dot-pmed_core_simple.md)
  : Simple P_med Core Computation
- [`.pmed_nonparametric_boot()`](https://data-wise.github.io/probmed/reference/dot-pmed_nonparametric_boot.md)
  : Nonparametric Bootstrap for P_med
- [`.pmed_parametric_boot()`](https://data-wise.github.io/probmed/reference/dot-pmed_parametric_boot.md)
  : Parametric Bootstrap for P_med
- [`.pmed_plugin()`](https://data-wise.github.io/probmed/reference/dot-pmed_plugin.md)
  : Plugin Estimator (Point Estimate Only)
- [`lm_class`](https://data-wise.github.io/probmed/reference/lm_class.md)
  : S3 Class Wrappers for S7
- [`` `%||%` ``](https://data-wise.github.io/probmed/reference/null-coalesce.md)
  : Null coalescing operator
- [`probmed-package`](https://data-wise.github.io/probmed/reference/probmed-package.md)
  [`probmed`](https://data-wise.github.io/probmed/reference/probmed-package.md)
  : probmed: Probabilistic Effect Sizes for Causal Mediation Analysis

# Articles

### Getting Started

- [introduction](https://data-wise.github.io/probmed/articles/introduction.md):
